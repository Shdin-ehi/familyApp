webpackJsonp([17],{521:function(t,e,a){a(658);var i=a(17)(a(560),a(634),null,null);t.exports=i.exports},560:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(57),l=a(125),r=function(t){return t&&t.__esModule?t:{default:t}}(l);e.default={data:function(){return{itemData:{id:"",lastOperatorTime:"",sort:"",ownerId:"",familyId:"",pieceNum:"",annualNum:"",fileCategoryId:"",fileDeadlineId:"",fileDutyId:"",refNum:"",fileTitle:"",produceDate:null,pageNum:null,fileCarrierId:null,fileLocateId:null,fileText:"",status:0,controlStatus:0,createUser:null,updateBy:null,createTime:null,cateName:null,carrierName:null,deadlineName:null,dutyName:null,locateName:null,ownerName:null},fileCategorys:[],public:!1,showInput:{},formstate:{},showError:!1}},computed:{cateNameList:function(){return this.fileCategorys.map(function(t){return{label:t.name,nativeValue:t.id+""}})}},mounted:function(){for(var t=1;t<=10;t++)this.$set(this.showInput,"ipt"+t,!1);this.getData()},beforeRouteUpdate:function(t,e,a){this.getData(),a()},methods:{getData:function(){var t=this;"edit"==this.$route.params.action&&r.default.ArchiveService.getArchive({data:{id:this.$route.params.id},success:function(e){t.itemData=e}}),r.default.ArchiveService.getFileCategorys({success:function(e){t.fileCategorys=e}})},cancel:function(){this.$root.$router.back()},updateData:function(){var t=this;if(t.formstate.$invalid)return void(t.showError=!0);t.setLoading(!0),r.default.ArchiveService.editArchive({data:t.itemData,success:function(e){t.showToast("保存成功！",1200,t.cancel)},error:function(){t.showToast("更新失败，请重新保存！",2500)},complete:function(){t.setLoading(!1)}})},dateFormat:i.dateFormat,setLoading:function(t){this.$store.dispatch("setLoading",t)},showToast:function(t,e,a){this.$store.dispatch("showToast",{toastText:t,time:e,callback:a})},hideToast:function(){this.$store.dispatch("hideToast")}}}},577:function(t,e,a){e=t.exports=a(16)(),e.push([t.i,"",""])},634:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-view-container"},[a("mu-appbar",{staticClass:"app-popup-topbar",attrs:{title:"详情"}},[a("mu-raised-button",{staticClass:"size-s",attrs:{label:"取消"},nativeOn:{click:function(e){t.cancel()}},slot:"left"}),t._v(" "),a("mu-raised-button",{staticClass:"size-s",attrs:{label:"确认",primary:""},nativeOn:{click:function(e){t.updateData()}},slot:"right"})],1),t._v(" "),a("div",{staticClass:"app-popup-content"},[a("vue-form",{attrs:{state:t.formstate}},[a("mu-list",{staticClass:"app-list"},[a("mu-sub-header",[t._v(t._s(t.itemData.fileTitle))]),t._v(" "),a("mu-divider"),t._v(" "),a("mu-list-item",{attrs:{title:"日期"},on:{click:function(e){t.$refs.label_lastOperatorTime.click()}}},[a("label",{ref:"label_lastOperatorTime",staticClass:"datetime-label",slot:"after"},[t._v(t._s(t.dateFormat(t.itemData.lastOperatorTime,"YYYY-MM-DD 星期w"))),a("mu-icon",{staticClass:"icon_date",attrs:{value:"date_range"}}),a("mu-date-picker",{staticClass:"item-hidden-input",model:{value:t.itemData.lastOperatorTime,callback:function(e){t.itemData.lastOperatorTime=e},expression:"itemData.lastOperatorTime"}})],1)]),t._v(" "),a("mu-divider"),t._v(" "),a("mu-list-item",{attrs:{title:"档案类别"},on:{click:function(e){t.showInput.ipt1=!0}}},[a("div",{slot:"after"},[t.showError&&t.formstate.fileCategoryId.$invalid?a("mu-icon",{staticClass:"app-form-error-icon",attrs:{value:"error_outline",color:"red"}}):t._e(),t._v(" "),a("my-select-page",{attrs:{topTitle:"更改档案类别",open:t.showInput.ipt1,name:"fileCategoryId",rules:{required:"required"},errors:{required:"至少选择一项"},options:t.cateNameList},on:{close:function(e){t.showInput.ipt1=!1}},model:{value:t.itemData.fileCategoryId,callback:function(e){t.itemData.fileCategoryId=e},expression:"itemData.fileCategoryId"}})],1),t._v(" "),a("mu-icon",{attrs:{value:"chevron_right"},slot:"right"})],1),t._v(" "),a("mu-divider"),t._v(" "),a("mu-list-item",{attrs:{title:"期限"},on:{click:function(e){t.showInput.ipt2=!0}}},[a("div",{slot:"after"},[t.showError&&t.formstate.fileDeadlineId.$invalid?a("mu-icon",{staticClass:"app-form-error-icon",attrs:{value:"error_outline",color:"red"}}):t._e(),t._v(" "),a("my-select-page",{attrs:{topTitle:"更改期限",open:t.showInput.ipt2,name:"fileDeadlineId",rules:{required:"required"},errors:{required:"至少选择一项"},options:[{label:"一年",nativeValue:"1"},{label:"两年",nativeValue:"2"},{label:"三年",nativeValue:"3"},{label:"五年",nativeValue:"4"},{label:"长期",nativeValue:"5"},{label:"永久",nativeValue:"6"}]},on:{close:function(e){t.showInput.ipt2=!1}},model:{value:t.itemData.fileDeadlineId,callback:function(e){t.itemData.fileDeadlineId=e},expression:"itemData.fileDeadlineId"}})],1),t._v(" "),a("mu-icon",{attrs:{value:"chevron_right"},slot:"right"})],1),t._v(" "),a("mu-divider"),t._v(" "),a("mu-list-item",{attrs:{title:"是否公开"},on:{click:function(e){t.public=!t.public}}},[a("mu-switch",{slot:"right",model:{value:t.public,callback:function(e){t.public=e},expression:"public"}})],1)],1),t._v(" "),a("mu-list",{staticClass:"app-list"},[a("mu-list-item",{attrs:{title:"件号"},on:{click:function(e){t.showInput.ipt4=!0}}},[a("div",{slot:"after"},[t.showError&&t.formstate.locateName.$invalid?a("mu-icon",{staticClass:"app-form-error-icon",attrs:{value:"error_outline",color:"red"}}):t._e(),t._v(" "),a("my-input-page",{attrs:{topTitle:"更改件号",open:t.showInput.ipt4,name:"locateName",rules:{hintText:"请输入件号",required:"required",maxlength:"10",maxLength:10},errors:{required:"必填项",maxlength:"必须小于10个字符"}},on:{close:function(e){t.showInput.ipt4=!1}},model:{value:t.itemData.locateName,callback:function(e){t.itemData.locateName=e},expression:"itemData.locateName"}})],1),t._v(" "),a("mu-icon",{attrs:{value:"chevron_right"},slot:"right"})],1)],1),t._v(" "),a("mu-list",{staticClass:"app-list"},[a("mu-sub-header",[t._v("备注")]),t._v(" "),a("validate",[a("mu-text-field",{staticClass:"item-insert",attrs:{hintText:"请输入备注",fullWidth:"",multiLine:"",underlineShow:!1,rows:2,rowsMax:5,name:"note",maxlength:10,errorText:t.matchError(t.formstate,"note",{maxlength:"必须小于10个字符"})},model:{value:t.itemData.deadlineName,callback:function(e){t.itemData.deadlineName=e},expression:"itemData.deadlineName"}})],1)],1)],1)],1)],1)},staticRenderFns:[]}},658:function(t,e,a){var i=a(577);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(18)("3c05bcb0",i,!0)}});