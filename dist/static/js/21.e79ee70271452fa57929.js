webpackJsonp([21],{550:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(193),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default={name:"my-webuploader",data:function(){return{files:[],uploader:null,editing:!1,state:"pending",defaultOption:{pick:{},accept:{title:"",extensions:"gif,jpg,jpeg,bmp,png,doc,docx,ppt,pptx,xls,xlsx,wps,dps,et,pdf,txt,rar,zip,3gp,mp4,avi,mpv2,mpg,mpe,mpeg,rmvb,rm,asf,divx,wmv,mkv,vob,flv,ogm,qt",mimeTypes:"*"},thumb:{width:98*(window.devicePixelRatio||1),height:98*(window.devicePixelRatio||1),quality:60,allowMagnify:!0,crop:!0},chunked:!1,server:"",fileNumLimit:7,fileSizeLimit:52428800,fileSingleSizeLimit:10485760}}},props:{rotatable:{type:Boolean,default:!0},config:{type:Object,default:function(){return{}}},uploadAccept:{type:Function,default:function(e,t){return"y"==t||"Y"==t}}},mounted:function(){var e=this,t=(0,o.default)({},this.defaultOption,this.config);t.pick.id=e.$refs.picker,i.e(0).then(function(){var a=[i(513)];(function(a){window.$=window.jQuery=a,i.e(23).then(function(){var a=[i(681)];(function(i){e.uploader=i.create(t);var a=e.uploader;a.on("fileQueued",function(t){e.files.push({id:t.id,name:t.name,size:t.size,ext:t.ext,state:"pending",rotation:"0",oFile:t}),"invalid"===t.getStatus()?e.$set(e.files.filter(function(e){return e.id==t.id})[0],"error","上传失败"):(a.makeThumb(t,function(i,a){if(i)return void e.$set(e.files.filter(function(e){return e.id==t.id})[0],"type",e.matchType(t.ext));e.$set(e.files.filter(function(e){return e.id==t.id})[0],"thumb",a)}),t.rotation=0)}),a.on("uploadProgress",function(t,i){e.$set(e.files.filter(function(e){return e.id==t.id})[0],"state","uploading"),e.$set(e.files.filter(function(e){return e.id==t.id})[0],"percentage",i)}),a.on("uploadBeforeSend",function(e,t,i){t.rotation=e.file.rotation,console.log(e),console.log(e.blob.source)}),a.on("uploadError",function(t){e.$set(e.files.filter(function(e){return e.id==t.id})[0],"state","error"),e.$set(e.files.filter(function(e){return e.id==t.id})[0],"error","上传出错，点击此处重试")}),a.on("uploadAccept",function(t,i){return e.uploadAccept(t,i)}),a.on("uploadSuccess",function(t,i){e.$set(e.files.filter(function(e){return e.id==t.id})[0],"state","success"),e.$set(e.files.filter(function(e){return e.id==t.id})[0],"error",""),e.$emit("uploadSuccess",t,i)}),a.on("uploadComplete",function(t){e.$set(e.files.filter(function(e){return e.id==t.id})[0],"percentage",100),e.$set(e.files.filter(function(e){return e.id==t.id})[0],"percentage",0),e.$emit("uploadComplete",t)}),a.on("uploadFinished",function(){e.$emit("uploadFinished")}),a.on("all",function(t){"startUpload"===t?e.state="uploading":"stopUpload"===t?e.state="paused":"uploadFinished"===t&&(e.state="done")}),a.on("error",function(e){var t="";switch(e){case"F_EXCEED_SIZE":t="文件太小超过限制";break;case"Q_EXCEED_SIZE_LIMIT":t="总太小超过限制";break;case"F_DUPLICATE":t="已有同名的上传文件";break;case"Q_EXCEED_NUM_LIMIT":t="数量超出限制";break;case"Q_TYPE_DENIED":t="文件类型不支持";break;default:t=e}alert(t)})}).apply(null,a)}).catch(i.oe)}).apply(null,a)}).catch(i.oe)},methods:{matchType:function(e){switch(e){case"png":case"gif":case"jpg":case"jpeg":case"bmp":return"img";case"doc":case"docx":case"wps":return"doc";case"ppt":case"pptx":case"dps":return"ppt";case"xls":case"xlsx":case"et":return"xls";case"pdf":return"pdf";case"txt":return"txt";case"rar":case"zip":return"rar";case"3gp":case"mp4":case"avi":case"mpv2":case"mpg":case"mpe":case"mpeg":case"rmvb":case"rm":case"asf":case"divx":case"wmv":case"mkv":case"vob":case"flv":case"ogm":case"qt":return"video";default:return"other"}},upload:function(){this.editing=!1,"uploading"===this.state?this.uploader.stop():this.uploader.upload()},removeFile:function(e){this.uploader.removeFile(e),this.files.splice(this.files.indexOf(this.files.filter(function(t){return t.id==e.id})[0]),1),0===this.files.filter(function(e){return"success"!==e.state}).length&&(this.editing=!1)},rotateFile:function(e,t){e.oFile.rotation+=t,console.log(e),this.$set(this.files.filter(function(t){return t.id==e.id})[0],"rotation",e.oFile.rotation)},retry:function(e){this.$set(this.files.filter(function(t){return t.id==e.id})[0],"error",""),this.uploader.retry(e)}},beforeDestroy:function(){this.uploader.destroy()}}},597:function(e,t,i){t=e.exports=i(16)(),t.push([e.i,'.my-webuploader .picker{-webkit-tap-highlight-color:rgba(0,0,0,.1);display:block;width:100px;height:100px}.my-webuploader .picker .webuploader-pick{position:absolute;top:0;bottom:0;left:0;right:0}.my-webuploader .picker .webuploader-pick .icon_add{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:48px;height:48px}.my-webuploader .picker .webuploader-pick .icon_add:before{content:"";display:inline-block;position:absolute;height:100%;width:4px;left:50%;top:0;margin-left:-2px;background:#ddd;border-radius:2px}.my-webuploader .picker .webuploader-pick .icon_add:after{content:"";display:inline-block;position:absolute;width:100%;height:4px;top:50%;left:0;margin-top:-2px;background:#ddd;border-radius:2px}.my-webuploader:after{display:block;content:"";visibility:hidden;height:0;clear:both}.my-webuploader-item{width:100px;height:100px;float:left;margin:6px;position:relative;overflow:hidden;box-sizing:border-box;border:1px solid #e3e3e3;background-color:#fefefe;border-radius:2px}.my-webuploader-item-icon{display:block;width:64px;height:64px;margin:10px auto 0;position:relative;background-repeat:no-repeat;background-position:50%;z-index:1}.my-webuploader-item-icon-img{width:98px;height:98px;margin:auto}.my-webuploader-item-icon img{height:100%;width:100%}.my-webuploader-item-icon-other{background-image:url('+i(126)+")}.my-webuploader-item-icon-doc{background-image:url("+i(196)+")}.my-webuploader-item-icon-ppt{background-image:url("+i(198)+")}.my-webuploader-item-icon-xls{background-image:url("+i(202)+")}.my-webuploader-item-icon-pdf{background-image:url("+i(197)+")}.my-webuploader-item-icon-txt{background-image:url("+i(200)+")}.my-webuploader-item-icon-rar{background-image:url("+i(199)+")}.my-webuploader-item-icon-video{background-image:url("+i(201)+")}.my-webuploader-item-name{position:absolute;bottom:2px;left:0;right:0;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;word-wrap:normal;margin:4px 3px 3px;cursor:pointer;font-size:12px;text-align:center}.my-webuploader-item-error{background-color:#ff6e6e}.my-webuploader-item-error,.my-webuploader-item-success{position:absolute;bottom:0;left:0;right:0;z-index:1;color:#fff;font-size:14px;text-align:center;line-height:20px;padding:0 4px}.my-webuploader-item-success{background-color:#2bb18c}.my-webuploader-item-progress{position:absolute;bottom:0;left:0;right:0;z-index:1;height:10px;background-color:#f9f9f9;border:1px solid #0288d1}.my-webuploader-item-progress .bar{display:block;width:0;height:100%;background-color:#50aceb}.my-webuploader-item-btns a{display:none;-webkit-tap-highlight-color:rgba(255,255,255,.1)}.my-webuploader-item-btns-show a{display:block}.my-webuploader-item-close{position:absolute;z-index:1;top:0;right:0;left:0;height:50%;background:url("+i(620)+") 50% no-repeat rgba(44,48,50,.68);border-bottom:1px solid #888;animation:myWebuploaderSlideDown .3s;-webkit-animation:myWebuploaderSlideDown .3s}.my-webuploader-item-rotate-left{position:absolute;z-index:1;top:50%;left:0;width:50%;height:50%;background:url("+i(621)+") 50% no-repeat rgba(44,48,50,.68);border-right:1px solid #888;animation:myWebuploaderSlideRight .3s;-webkit-animation:myWebuploaderSlideRight .3s}.my-webuploader-item-rotate-right{position:absolute;z-index:1;top:50%;right:0;width:50%;height:50%;background:url("+i(622)+") 50% no-repeat rgba(44,48,50,.68);animation:myWebuploaderSlideLeft .3s;-webkit-animation:myWebuploaderSlideLeft .3s}.webuploader-container{position:relative}.webuploader-element-invisible{position:absolute!important;clip:rect(1px 1px 1px 1px)}.webuploader-pick-hover{background:transparent}.webuploader-pick-disable{opacity:.6;pointer-events:none}.my-webuploader-btn-wrap{padding:6px 12px;clear:both}.fadeout-enter-active,.fadeout-leave-active{-webkit-transition:opacity .8s;transition:opacity .8s}.fadeout-leave-active{opacity:0}@-webkit-keyframes myWebuploaderSlideDown{0%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}to{-webkit-transform:translate(0);transform:translate(0)}}@keyframes myWebuploaderSlideDown{0%{-webkit-transform:translateY(-100%);transform:translateY(-100%)}to{-webkit-transform:translate(0);transform:translate(0)}}@-webkit-keyframes myWebuploaderSlideLeft{0%{-webkit-transform:translate(100%);transform:translate(100%)}to{-webkit-transform:translate(0);transform:translate(0)}}@keyframes myWebuploaderSlideLeft{0%{-webkit-transform:translate(100%);transform:translate(100%)}to{-webkit-transform:translate(0);transform:translate(0)}}@-webkit-keyframes myWebuploaderSlideRight{0%{-webkit-transform:translate(-100%);transform:translate(-100%)}to{-webkit-transform:translate(0);transform:translate(0)}}@keyframes myWebuploaderSlideRight{0%{-webkit-transform:translate(-100%);transform:translate(-100%)}to{-webkit-transform:translate(0);transform:translate(0)}}",""])},620:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAASxJREFUeNps0cErBFEcwPE3KGkjLg62TS7yByi5mZSTcnPYlMOmNpyojdTIRLIpqT2sg5uj05aLy3MQJQ5yc3RQIonmsKTn+2Z+LzO1U5/fzLz3+7157zeemdjqU0rl8ax08K5aXX7YSRxh/r6NhzEcYYOJ3hbJ7cQiGvbVFjQxgBVUSMilkjuIc9hBwQ7ZgWsZ2MR6vIgfVrlHmMc2unFgCzxjjFtpGvsYQg1vWEKPFB1yhigp+N/ClKw0jF98YBd1kpvuDOnrEneyVduZR5y75GyBH3YRlzGDFzxhFKvMDWYLknZW5PDfcvhFPKCEqiuyHemP/0GS9CrtPWEbZ9zXZIuzOHZfGMcCvlLJP/GXdaCJZdxg0hV84gJ7OCXJZNqgg1v5R1f29U+AAQC85FPb7Z88jAAAAABJRU5ErkJggg=="},621:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATdJREFUeNqc000rRFEcx/F7b0TjKSk2o5QomaZEsfIGbGTJig0WvAFr78DKRpnUrKYZC+VhFpIFJWXBQiMLSVFCSZka33/9pk63607dU5/OfTq/e865/+unt2492hiuvQQtUF/GBJqwjGPUHKdYQ0s4wNcM7KF3vGI45oWPmHNnGzg3uzX4GesYtBegH0uoYABnGIoKqLd2XOJB50/YQRZFtGFXy40M6MQRJkPXv7GAO0xh1Q3wQ7pwERFuIZs6nv9vBo3avvpxW0aSgC/8oNlmmiSgA634xUeSgBn1V6gG2lkrpBf0NBhslbih41x9E/dwgD4UYkJSyCODc2y7X8Hq/w3TKlOr+7Tu9WJR12fxqfOq+y94Ks8SRmKWUNG/cBNVyvcqV6v7Q30qT7t9ghWMuoOt/QkwAHoNPzjIXc+XAAAAAElFTkSuQmCC"},622:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATlJREFUeNqc008rRFEYx/GZ22jk3yRhM0qJDU2JYsMbsGBtVmyw4A1YewdWs7AgNatpslD+LSQLSsqCIlaShQ1KahTfZ/odnW7XLfepT6cz957nPHPPc9L59etUwhjGZRDxIItlHOPbc4AFZDCKI3s5HarAslbQG7PzLTrRbuv9CvpxosX3mEePvYQ+rOAJA1pcj4w3bqIZVRTx4SV/wDlawuW4CpYwjpuIxRZj2EdbOIGrYFbjWsRiizPkoj5IoCQjmu/89ywDZW7AJ96TJHhFDY1oTZLgCxeaTyVJYLGlcVWdGBcdeFZ3Fl2CEk4xhDKaYhZbp3ZjF9sugf2NObxhxi6J5l16ntf9sN8n8aJ78dsHFneY0A7Wrht/VGHNNo1H/xu4uMIgFnGo00npiPd0PwrarB4/AgwAIT876cpgus0AAAAASUVORK5CYII="},629:function(e,t,i){i(678);var a=i(17)(i(550),i(655),null,null);e.exports=a.exports},655:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"my-webuploader"},[i("div",{staticClass:"my-webuploader-item"},[i("a",{ref:"picker",staticClass:"picker",attrs:{href:"javascript:void(0)"}},[i("i",{staticClass:"icon_add"})])]),e._v(" "),e._l(e.files,function(t){return[i("div",{staticClass:"my-webuploader-item",on:{click:function(i){"success"!==t.state&&(e.editing=!0)}}},[i("a",{staticClass:"my-webuploader-item-icon",class:"my-webuploader-item-icon-"+e.matchType(t.ext||t.name.match(/\.(\w+)$/)[1]),attrs:{href:"javascript:void(0)"}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.thumb,expression:"file.thumb"}],style:{"-webkit-transform":"rotate("+t.rotation+"deg)","-mos-transform":"rotate("+t.rotation+"deg)","-o-transform":"rotate("+t.rotation+"deg)",transform:"rotate("+t.rotation+"deg)"},attrs:{src:t.thumb,alt:""}})]),e._v(" "),i("div",{staticClass:"my-webuploader-item-name"},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"my-webuploader-item-btns",class:{"my-webuploader-item-btns-show":e.editing&&"success"!==t.state}},[i("a",{directives:[{name:"show",rawName:"v-show",value:"success"!=t.state,expression:"file.state!='success'"}],staticClass:"my-webuploader-item-close",attrs:{href:"javascript:void(0)"},on:{click:function(i){i.stopPropagation(),e.removeFile(t.oFile)}}}),e._v(" "),e.rotatable&&"img"==e.matchType(t.ext||t.name.match(/\.(\w+)$/)[1])&&"pending"==t.state?i("a",{staticClass:"my-webuploader-item-rotate-left",attrs:{href:"javascript:void(0)"},on:{click:function(i){i.stopPropagation(),e.rotateFile(t,90)}}}):e._e(),e._v(" "),e.rotatable&&"img"==e.matchType(t.ext||t.name.match(/\.(\w+)$/)[1])&&"pending"==t.state?i("a",{staticClass:"my-webuploader-item-rotate-right",attrs:{href:"javascript:void(0)"},on:{click:function(i){i.stopPropagation(),e.rotateFile(t,-90)}}}):e._e()]),e._v(" "),i("span",{staticClass:"my-webuploader-item-error",on:{click:function(i){i.stopPropagation(),e.retry(t.oFile)}}},[e._v(e._s(t.error))]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:"success"==t.state,expression:"file.state=='success'"}],staticClass:"my-webuploader-item-success"},[e._v("上传成功")]),e._v(" "),i("transition",{attrs:{name:"fadeout"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!!t.percentage,expression:"!!file.percentage"}],staticClass:"my-webuploader-item-progress"},[i("span",{staticClass:"bar",style:{width:100*t.percentage+"%"}})])])],1)]}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.editing,expression:"editing"}],staticClass:"my-webuploader-btn-wrap"},[i("mu-raised-button",{staticClass:"exitEditing",attrs:{label:"退出编辑",fullWidth:""},on:{click:function(t){e.editing=!1}}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.files.filter(function(e){return"success"!==e.state}).length,expression:"files.filter((x)=> x.state!=='success').length!==0"}],staticClass:"my-webuploader-btn-wrap"},[i("mu-raised-button",{attrs:{label:"uploading"==e.state?"暂停上传":"开始上传",primary:"",fullWidth:""},on:{click:e.upload}})],1)],2)},staticRenderFns:[]}},678:function(e,t,i){var a=i(597);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(18)("69a20012",a,!0)}});